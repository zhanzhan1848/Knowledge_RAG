# Knowledge RAG System - Environment Variables Template
# 复制此文件为 .env 并填入实际值

# ===========================================
# 应用基础配置
# ===========================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
APP_NAME=Knowledge RAG System
APP_VERSION=0.1.0

# ===========================================
# 数据库配置
# ===========================================
# PostgreSQL 主数据库
DATABASE_URL=postgresql+asyncpg://postgres:postgres123@localhost:5432/knowledge_rag

# 各微服务数据库
AUTH_DATABASE_URL=postgresql+asyncpg://postgres:postgres123@localhost:5432/auth_db
DOCUMENT_DATABASE_URL=postgresql+asyncpg://postgres:postgres123@localhost:5432/document_db
VECTOR_DATABASE_URL=postgresql+asyncpg://postgres:postgres123@localhost:5432/vector_db
KNOWLEDGE_GRAPH_DATABASE_URL=postgresql+asyncpg://postgres:postgres123@localhost:5432/knowledge_graph_db

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ===========================================
# Redis 配置
# ===========================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=10
REDIS_RETRY_ON_TIMEOUT=true

# ===========================================
# Elasticsearch 配置
# ===========================================
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=knowledge_rag

# ===========================================
# Neo4j 配置
# ===========================================
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j123
NEO4J_DATABASE=neo4j

# ===========================================
# RabbitMQ 配置
# ===========================================
RABBITMQ_URL=amqp://rabbitmq:rabbitmq123@localhost:5672/
RABBITMQ_EXCHANGE=knowledge_rag_exchange
RABBITMQ_QUEUE_PREFIX=knowledge_rag

# ===========================================
# LLM API 配置
# ===========================================
# OpenAI
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Anthropic Claude
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_MAX_TOKENS=4096

# 本地模型配置
LOCAL_MODEL_PATH=./models
HUGGINGFACE_CACHE_DIR=./models/huggingface
HUGGINGFACE_API_KEY=your_huggingface_api_key_here

# GraphRAG 配置
GRAPHRAG_STORAGE_TYPE=file
GRAPHRAG_STORAGE_BASE_DIR=./data/graphrag
GRAPHRAG_LLM_MODEL=gpt-3.5-turbo
GRAPHRAG_EMBEDDING_MODEL=text-embedding-ada-002
GRAPHRAG_CHUNK_SIZE=1200
GRAPHRAG_CHUNK_OVERLAP=100
GRAPHRAG_MAX_TOKENS=8000
GRAPHRAG_COMMUNITY_LEVEL=2

# ===========================================
# 向量数据库配置
# ===========================================
# ChromaDB
CHROMA_HOST=localhost
CHROMA_PORT=8000
CHROMA_PERSIST_DIRECTORY=./data/chroma

# FAISS
FAISS_INDEX_PATH=./data/faiss
FAISS_DIMENSION=768

# Weaviate
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your_weaviate_api_key_here
WEAVIATE_CLASS_NAME=Document
WEAVIATE_VECTORIZER=text2vec-openai
WEAVIATE_BATCH_SIZE=100

# 嵌入模型配置
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32

# ===========================================
# 文件存储配置
# ===========================================
UPLOAD_DIR=./data/uploads
TEMP_DIR=./data/temp
PROCESSED_DIR=./data/processed
MAX_FILE_SIZE=100MB
ALLOWED_FILE_TYPES=pdf,docx,txt,md,html,csv,xlsx,pptx

# ===========================================
# 安全配置
# ===========================================
# JWT 配置
JWT_SECRET_KEY=your_jwt_secret_key_here_change_in_production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 密码加密
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ===========================================
# 监控配置
# ===========================================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8080
PROMETHEUS_PATH=/metrics

# Jaeger Tracing
JAEGER_ENABLED=true
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=knowledge-rag

# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ===========================================
# 日志配置
# ===========================================
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# ===========================================
# 缓存配置
# ===========================================
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# ===========================================
# 任务队列配置
# ===========================================
CELERY_BROKER_URL=redis://localhost:6379/8
CELERY_RESULT_BACKEND=redis://localhost:6379/9
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# ===========================================
# 微服务端口配置
# ===========================================
API_GATEWAY_PORT=8000
AUTH_SERVICE_PORT=8001
DOCUMENT_SERVICE_PORT=8002
VECTOR_SERVICE_PORT=8003
LLM_SERVICE_PORT=8004
QA_SERVICE_PORT=8005
KNOWLEDGE_GRAPH_SERVICE_PORT=8006
NOTIFICATION_SERVICE_PORT=8007
GRAPH_SERVICE_PORT=8008

# ===========================================
# 开发配置
# ===========================================
RELOAD=true
WORKERS=1
HOST=0.0.0.0
PORT=8000

# ===========================================
# 生产配置（仅在生产环境使用）
# ===========================================
# ENVIRONMENT=production
# DEBUG=false
# WORKERS=4
# LOG_LEVEL=WARNING
# RELOAD=false